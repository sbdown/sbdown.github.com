---
layout: post
title: "14年面试题目汇总与总结"
description: "关于此次面试遇到的HR们提到的各种问题，在此收集整理，算是规划思路也为以后做个参考。"
category: 杂文
tags: [面试, 多线程, 并发, 分布式, MVC]
---
{% include JB/setup %}

至于是哪些公司就不列举了，也不是什么大公司，没什么好说的。

此次面试其实是想走高程的路线，但是发现其实自己能力还是有不少欠缺，

自己平时不知道，总感觉无法继续提升，经过这次面试还是有些眉目。

下面就总结下这次面试遇到的一些典型问题。


1. ####多线程编程如何同步？
	答：lock互斥锁，或Mutex。
	
	正解：首先，在什么情况下需要进行线程同步呢？答案是在访问共享资源的时候，为了防止多个线程之间抢夺共享
	资源从而发生意料之外的错误。因此在某一个线程正在使用某一项共享资源的时候其他线程便不允许再使用了，这
	就是“资源独占”，那么又如何做到资源独占呢？在C#中有以下几种实现方式：
	
	* lock

		MSDN中是这样描述lock的：
		
			lock关键字将语句块标记为临界区，方法是获取给定对象的互斥锁，执行语句，然后释放该锁。
			
			lock 关键字可确保当一个线程位于代码的临界区时，另一个线程不会进入该临界区。 如果其他线程尝试进入锁定的代码，则它将一直等待（即被阻止），直到该对象被释放。

	说的很清楚了，lock关键字将语句块标记为临界区，而当一个线程位于临界区时，其他线程是不能再进入该临界区
	的，这样在临界区内使用到的共享资源就被独占了。

	* Mutex

		MSDN中这样描述Mutex:
			
			一个同步基元，也可用于进程间同步。
		
		可以了解到，Mutex是进程级别的同步工具。

		那Mutex的工作原理又是什么？Mutex类包含两个最主要的方法：WaitOne()和ReleaseMutex()。

			使用WaitOne阻止当前线程，直到当前WaitHandle收到信号。

		这句话是什么意思呢？就是当线程运行到WaitOne这句的时候就不会往下继续运行了，直到收到一个信号。
		什么信号？就是使用ReleaseMutex()方法发出的释放Mutex的信号。因此在WaitOne和ReleaseMutex之间的
		代码则通过这种方式被“独占"了。

	* Monitor Monitor的用法与Mutex相似，但它不是进程级别的。

	* Semaphore,Interlocked,ReaderWriterLock 这三种锁就不是很常用了，了解即可。


2. ####多线程为何会发生死锁？
   答：因为没有释放锁（靠，这TM是什么答案，我为什么要说这句话……）

   正解：参考[《多线程死锁是如何造成的》](/编程/2014/02/12/duo-xian-cheng-si-suo-shi-ru-he-zao-cheng-de/ "多线程死锁是如何造成的")

3. ####线程之间如何通信？
   答：通过委托。

   正解：

	* 全局变量法：即通过一个全局变量来共享线程之间的数据，但要注意：全局变量需要使用volatile关键字修饰。

	   MSDN定义volatile如下： 

			关键字指示一个字段可以由多个同时执行的线程修改。 声明为 volatile 的字段不受编译器优化（假定由单个线程访问）的限制。 这样可以确保该字段在任何时间呈现的都是最新的值。

	* 发送线程消息：其实就是调用BeginInvoke，EndInvoke等方法，这些方法内部是通过Windows API的PostMessage/SendMessage方式实现的。

	* 事件委托：通过在线程上注册事件，由线程去触发事件来进行“回调”方式的线程通信。

4. ####MVC路由的特征有哪些？
	答：我完全是一片茫然，只好答到：路由可以让我们自定义URL，而不像WebForm那样根据URL读取ASPX文件并进行解析。

	正解：Google了又Baidu，没有找到标准答案，我总结了一些，如下：

	* 在匹配路由的过程中只要匹配到符合当前url规则的路由之后就不再继续往后匹配了。

	* 在路由中可以使用变量（这算是特征么？）。

	* 可以给路由的各个参数设定默认值（比如可以设置Controller默认为Home，Action默认为Index）。

	* 其他特征……

5. ####说说你对分布式事务的了解。
	答：呵呵

	正解：先熟悉下什么是事务：事务提供一种机制将一个活动涉及的所有操作纳入到一个不可分割的执行单元，组成事务的所有操作只有在所有操作均能正常执行的情况下方能提交，只要其中任一操作执行失败，都将导致整个事务的回滚。简单地说，事务提供一种“要么什么都不做，要么做全套（All or Nothing）”机制。

	再来了解下什么是分布式事务（Distributed Transaction），打个比方：为某系统提供数据存储的数据库服务器有两个，分别是A和B，
	在处理某项业务的过程中既要操作A又要操作B，同时这项操作还必须包含在一个事务中，以确保对A和B的操作均正确执行，
	则在这种情况下就涉及到了“分布式事务”。 对于一个分布式事务来讲，事务的参与者分布于网络环境中的不同的节点。也就是说，我们可以将多个事务资源纳入到一个单一的事务之中，并且这些事务资源可以分布到不同的机器上。这些承载分布式资源的机器可能是处于同一个网络中，也可能处于不同的网络中。甚至说，某个事务资源本质上就是一个通过HTTP访问的单纯的Internet资源。

6. ####如何处理并发？
	答：茫然

	正解：这个题目的范围好广。流汗流汗。。。 其实说穿了，就跟之前的线程同步是一个道理，如果某项业务的数据是大家共享的，或者这项业务的操作涉及到对共享数据的
	修改，则需要考虑到多个用户同时操作此项业务时控制业务数据的准确性。超级简单的解决办法就是使用lock锁。

7. ####JS中如何遍历对象的属性？
	答：哎，当时糊涂了，其实这种代码我已经写了很多次，无奈和其他语言的语法搞混了，结果回答了个使用foreach，悲剧啊。。。

	正解：使用for in语句遍历对象的属性再使用hasOwnProperty()方法判断是自身的属性还是从原型链上继承的属性，我用Node.js来实验了下：
	
		var http = require('http');
		http.createServer(function(req, res){
			res.writeHead(200, {'Content-Type': 'text/plan'});
			var result = '';
			for(v in res){
				if(res.hasOwnProperty(v)){
					result += v + '\r\n'
				}
			}
			res.end(result);
		}).listen(7777, '127.0.0.1');

8. ####说说ADO与ADO.NET之间的区别。
	答：这个，我真不知道，从我学程序开始，ADO就已经死了。

	正解：我在MSDN上找到了答案，它们之间的区别如下：
	
	* 数据的内存中表示形式：在 ADO 中，数据的内存中表示形式为记录集。
	  在 ADO.NET   中，它为数据集，它们的差别是记录集差不多像一张表，而数据集则是一个DataTable对象。
	
	* ADO.NET将打开链接的时间降至最低：ADO.NET打开数据库链接的时间仅限于SQL语句执行的时间，例如一条select语句或insert语句执行完毕后即关闭链接；在 ADO  中，通过调用 OLE DB 提供程序来与数据库通信。ADO.NET 中通过 TableAdapter 或数据适配器（如 SqlDataAdapter）与数据库通信，ADO 和 
	  ADO.NET  之间的主要区别在于：在 ADO.NET 中，
	  适配器允许您控制将对数据集所做的更改传输到数据库的方式，方法是实现性能优化、执行数据验证检查或添加其他任何额外处理。
	  
	* 在应用程序之间共享数据：在应用程序间传输 ADO.NET 数据集比传输 ADO 不连接的记录集要容易得多。
	  若要将 ADO   不连接的记录集从一个组件传输到另一个组件，请使用 COM 封送。若要在 ADO.NET 中传输数据，请使用数据集，它可以传输 XML 流。
	  
	  
#####时至今日，已面了不少公司了，不是他看不上我，就是我看不上他，真是冤冤相报何时了；写此面试总结又恰逢元宵佳节，祝朋友们新春快乐，万事如意，再祝我早日找到满意的工作！！！